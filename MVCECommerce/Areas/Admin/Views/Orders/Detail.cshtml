@model Order
@{
    ViewData["Title"] = "Sipariş Detayı";
}

<div>
    <b>Tarih:</b> @Model.Date.ToShortDateString()
</div>
<div>
    <b>Kullanıcı Adı:</b> @Model.User!.GivenName
</div>
<div>
    <b>Kullanıcı EPosta:</b> @Model.User!.Email
</div>
<div>
    <b>Tutar:</b> <span class="text-success">@Model.GrandTotal.ToString("n2")</span>
</div>
<div>
    <b>Durum:</b>
    @switch (Model.Status)
    {
        case OrderStatus.New:
            <span class="badge badge-primary">Yeni</span>
            break;
        case OrderStatus.InProgress:
            <span class="badge badge-warning">Hazırlanıyor</span>
            break;
        case OrderStatus.Shipped:
            <span class="badge badge-success">Teslim Edildi</span>
            break;
        case OrderStatus.Cancelled:
            <span class="badge badge-danger">İptal Edildi</span>
            break;
        default:
            break;
    }
</div>
<table class="table">
    <thead>
        <tr>
            <th></th>
            <th>Ad</th>
            <th>Liste Fiyatı</th>
            <th>Fiyat</th>
            <th>Miktar</th>
            <th>Tutar</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Items)
        {
            <tr>
                <td>
                    <img src="@Url.Action("Product","Images", new { area = "", item.Product!.Id})" alt="" height="80" />
                </td>
                <td>
                    @item.Product.NameTr
                </td>
                <td>
                    @item.Product.Price.ToString("n2")
                </td>
                <td>
                    @item.Price.ToString("n2")
                </td>
                <td>
                    @item.Quantity
                </td>
                <td>
                    @item.Amount.ToString("n2")
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="py-3 border d-flex">
    @switch (Model.Status)
    {
        case OrderStatus.New:
            <a asp-action="ToInProgress" asp-route-id="@Model.Id" class="btn btn-primary ml-auto">Hazırlanıyor</a>
            break;
        case OrderStatus.InProgress:
            <a asp-action="ToShipped" asp-route-id="@Model.Id" class="btn btn-primary ml-auto">Gönderildi</a>
            break;
        case OrderStatus.Shipped:
            break;
        case OrderStatus.Cancelled:
            break;
        default:
            break;
    }
</div>